<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modo pre/post evento</title>
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/general-styles.css">
    <link rel="stylesheet" href="../css/libraries/air-datepicker.min.css">
    <link rel="stylesheet" href="../css/admin-modo.css">
    <link rel="stylesheet" href="../css/utils.css">

    <script src="../js/common.js"></script>
    <script src="../js/api-service.js"></script>
    <script src="../js/check-session.js"></script>
</head>
<body>

    <div class="admin-super-container">
        <menu-admin></menu-admin>
        <div class="admin-page-content">
            <div class="admin-header">
                <div class="admin-header-module-info-container">
                    <p class="admin-module-name">Modo pre/post evento</p>
                    <span class="text-neutral-03 mt-4px d-none d-md-block">Gestiona el contenido público de la Gala para el sitio web</span>
                </div>
            </div>

            <div class="d-flex flex-column gap-16px responsive-mode-cards-container p-0 p-md-24px-force">

                <div class="order-2 order-md-1 generic-card">
                    <div class="d-flex flex-column flex-md-row gap-16px justify-space-between">
                        <div class="mode-info-container">
                            <span class="mode-info-text">Modo:</span>
                            <div class="d-flex flex-row gap-12px align-items-center w-100">
                                <div class="mode-button active" id="preEventoButton">Pre-evento</div>
                                <div class="mode-button" id="postEventoButton">Post-evento</div>
                            </div>
                        </div>
                        <div class="d-flex flex-column flex-md-row align-items-center gap-12px">
                            <span class="text-warning-01 fs-14px fw-500 d-none text-nowrap" id="unsavedChangesWarning">● Hay cambios sin publicar</span>
                            <div class="d-flex flex-row w-100 align-items-center">
                                <button class="primary-button-02 fs-14px w-100" id="publishChangesButton">Publicar cambios</button>
                            </div>
                        </div>
                    </div>
                    <span id="generalMessage" class="fs-14px fw-500"></span>
                </div>

                <div class="order-1 order-md-2 generic-cards-container flex-grow-1 overflow-y-auto h-auto">

                    <!-- Cards Pre-evento -->
                    <div class="generic-card preEventoCard hidden-force">
                        <div class="card-header">
                            <div class="d-flex flex-row gap-12px flex-grow-1">
                                <div class="icon-container">
                                    <span class="icon-document w-24px h-24px bg-neutral-01"></span>
                                </div>
                                <div class="d-flex flex-column gap-4px">
                                    <span class="card-header-title">Información Principal</span>
                                    <span class="card-header-subtitle">Datos generales del evento</span>
                                </div>
                            </div>
                        </div>
                        <input-component
                                label="Título del evento principal"
                                id="tituloEventoInput"
                                width="100%"
                                required
                                required-message="El título no puede estar vacío"
                                min-length="5"
                                error-message="El título es demasiado corto (mínimo 5 letras)">
                        </input-component>
                        <div class="generic-input-groups-row">
                            <date-component
                                    id="fechaEventoInput"
                                    label="Fecha de la gala"
                                    required
                                    min-date="today"
                            ></date-component>
                            <date-component
                                    id="horaEventoInput"
                                    label="Hora"
                                    type="time"
                            ></date-component>
                        </div>
                        <div class="generic-input-group">
                            <input-component
                                    label="Ubicación"
                                    id="ubicacionEventoInput"
                                    width="100%"
                                    required
                                    required-message="La ubicación no puede estar vacía">
                            </input-component>
                        </div>
                        <input-component
                                id="descripcionInput"
                                label="Descripción del evento"
                                textarea
                                required
                                required-message="La descripción no puede estar vacía"
                        ></input-component>
                        <span class="helper-text">Esta información aparecerá en la landing page pública</span>
                    </div>
                    <div class="generic-card preEventoCard hidden-force">
                        <div class="card-header">
                            <div class="d-flex flex-row gap-12px flex-grow-1">
                                <div class="icon-container">
                                    <span class="icon-live w-24px h-24px bg-neutral-01"></span>
                                </div>
                                <div class="d-flex flex-column gap-4px">
                                    <span class="card-header-title">Streaming en vivo</span>
                                    <span class="card-header-subtitle">Habilita y configura el enlace de streaming</span>
                                </div>
                            </div>
                        </div>
                        <div class="streaming-card" id="streamingToggleContainer">
                            <div class="streaming-left-side">
                                <div class="streaming-indicator">
                                    <span class="icon-live w-24px h-24px bg-neutral-03 icon"></span>
                                    <span class="streaming-indicator-text" id="streamingIndicatorText">OFF</span>
                                </div>
                               <div class="streaming-text-container">
                                   <span class="streaming-label-text">Mostrar enlace de streaming</span>
                                   <span class="streaming-helper-text" id="streamingHelperText">El enlace estará oculto para los visitantes</span>
                               </div>
                            </div>
                            <div class="streaming-right-side">
                                <div class="streaming-toggle-button" id="streamingToggleButton">
                                    <div class="toggle-button-circle"></div>
                                </div>
                            </div>
                        </div>
                        <input-component
                                label="URL del streaming"
                                id="urlStreamingInput"
                                width="100%"
                                required
                                required-message="La URL del streaming no puede estar vacía">
                        </input-component>
                        <span class="helper-text">Introduce la URL completa del streaming (YouTube, TikTok, etc.)</span>
                    </div>
                    <div class="generic-card preEventoCard hidden-force">
                        <div class="card-header">
                            <div class="d-flex flex-row gap-12px flex-grow-1">
                                <div class="icon-container">
                                    <span class="icon-calendar w-24px h-24px bg-neutral-01"></span>
                                </div>
                                <div class="d-flex flex-column gap-4px">
                                    <span class="card-header-title">Itinerario del día</span>
                                    <span class="card-header-subtitle">Eventos programados para la Gala</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center gap-8px">
                                <a class="primary-button-02" id="manageEventsButton">
                                    <span>Gestionar eventos del día de la Gala</span>
                                </a>
                            </div>
                        </div>
                        <div class="secondary-card">
                            <span class="helper-text-2">Los eventos se gestionan desde el módulo de Eventos. Los cambios se reflejarán automáticamente en la landing pública.</span>
                        </div>
                    </div>


                    <!-- Cards Post-evento -->
                    <div class="generic-card postEventoCard hidden-force">
                        <div class="card-header">
                            <div class="d-flex flex-row gap-12px flex-grow-1">
                                <div class="icon-container">
                                    <span class="icon-document w-24px h-24px bg-neutral-01"></span>
                                </div>
                                <div class="d-flex flex-column gap-4px">
                                    <span class="card-header-title">Resumen del evento</span>
                                    <span class="card-header-subtitle">Texto descriptivo para la landing post-evento</span>
                                </div>
                            </div>
                        </div>
                        <div class="large-input-group">
                            <div class="large-input-group-header">
                                <span class="large-input-group-label-text">Contenido</span>
                            </div>
                            <input-component
                                    id="postEventoResumenInput"
                                    label="Resumen de la Gala"
                                    textarea
                                    required
                                    required-message="El resumen no puede estar vacío"
                            ></input-component>
                            <span class="helper-text">Describe los momentos destacados y el éxito del evento</span>
                        </div>
                    </div>

                    <div class="generic-card postEventoCard hidden-force">
                        <div class="card-header">
                            <div class="d-flex flex-row gap-12px flex-grow-1">
                                <div class="icon-container">
                                    <span class="icon-picture bg-neutral-01 w-24px h-24px"></span>
                                </div>
                                <div class="d-flex flex-column gap-4px">
                                    <span class="card-header-title">Galería de imágenes y vídeos</span>
                                    <span class="card-header-subtitle">Sube las fotos y vídeos del evento</span>
                                </div>
                            </div>
                        </div>
                        <file-component
                            id="fileInputEdicionActual"
                            label="Galería de imágenes y vídeos"
                            primary-text="Arrastra tu imagen o vídeo o haz clic para seleccionar"
                            secondary-text="Formatos aceptados: MP4, MOV, AVI, JPG, JPEG, PNG, WEBP, AVIF. Tamaño máximo: 200MB"
                            accept=".mp4,.mov,.avi,.jpg,.jpeg,.png,.webp,.avif"
                            max-size="209715200"
                            required
                            multiple
                            error-type="Formato no válido. Los formatos permitidos son MP4, MOV, AVI, JPG, JPEG, PNG, WEBP y AVIF"
                            error-size="El archivo es muy pesado. El máximo permitido son 200MB"
                            error-required="Debes subir al menos una imagen o vídeo"
                    ></file-component>
                    </div>

                    <div class="generic-card postEventoCard hidden-force">
                        <div class="card-header">
                            <div class="d-flex flex-row gap-12px flex-grow-1">
                                <div class="icon-container">
                                    <span class="icon-star bg-neutral-01 w-24px h-24px"></span>
                                </div>
                                <div class="d-flex flex-column gap-4px">
                                    <span class="card-header-title">Ganadores del evento</span>
                                    <span class="card-header-subtitle">Lista de ganadores por categoría</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center gap-8px">
                                <a class="primary-button-02" href="admin-ganadores.html">
                                    <span class="icon-external"></span>
                                    <span>Gestionar ganadores</span>
                                </a>
                            </div>
                        </div>
                        <div class="secondary-card">
                            <span class="helper-text-2">Los ganadores se gestionan desde el módulo de Finalistas. Los cambios se reflejarán automáticamente en la landing pública.</span>
                        </div>
                    </div>

                    <div class="generic-card postEventoCard hidden-force">
                        <div class="main-action-right-side">
                            <button class="secondary-button-01 text-center" id="sendToPreviousEditionsButton" disabled>Enviar a Ediciones Anteriores</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <modal-component id="modalEnviarEdicionesAnteriores" static scrollable mobile-full-screen>
        <div class="d-flex justify-space-between align-center py-16px px-24px border-solid border-neutral-05">
            <div class="d-flex flex-column gap-4px">
                <span class="fs-20px fw-600">Enviar a Ediciones Anteriores</span>
                <span class="fs-12px text-neutral-04">Crea una nueva entrada en el histórico de ediciones</span>
            </div>
            <div class="d-flex align-items-center gap-8px">
                <span class="icon-close w-24px h-24px bg-neutral-03 close-modal cursor-pointer"></span>
            </div>
        </div>
        <div class="modal-body flex-grow-1 overflow-y-auto">
            <p class="fw-600">Información básica de la Edición</p>
            <div class="generic-input-groups-row">
                <input-component
                        label="Año de edición"
                        id="yearEdicionInput"
                        type="number"
                        required
                        min-length="4"
                        max-length="4"
                        required-message="El año no puede estar vacío"
                ></input-component>
                <div class="generic-input-group">
                    <span class="generic-input-label">Número de participantes</span>
                    <label class="d-flex align-center p-12px gap-8px">
                        <span class="icon-user-thick w-16px h-16px bg-neutral-03"></span>
                        <span id="nroParticipantesText"></span>
                    </label>
                </div>
            </div>
            <p class="fw-600">Acciones programadas</p>

            <date-component
                    id="fechaEnvioEmailInformativoInput"
                    label="Fecha de envío de email informativo"
                    required
                    min-date="today"
            ></date-component>
            <span class="helper-text">Se enviará un email a todos los participantes informando del archivo de esta edición</span>

            <date-component
                    id="fechaBorradoDatosInput"
                    label="Fecha de borrado de candidaturas no ganadoras"
                    required
                    min-date="today"
            ></date-component>
            <span class="helper-text">Se eliminarán automáticamente las candidaturas que no sean ganadoras</span>


            <div class="card-header">
                <div class="d-flex flex-row gap-12px">
                    <div class="icon-container flex-shrink-0">
                        <span class="icon-star bg-neutral-01 w-24px h-24px"></span>
                    </div>
                    <div class="d-flex flex-column gap-4px">
                        <span class="card-header-title">Ganadores de esta edición</span>
                        <span class="card-header-subtitle">Se incluirán los ganadores de la edición actual</span>
                    </div>
                </div>
                <div class="d-flex align-items-center gap-8px flex-shrink-0">
                    <a class="primary-button-02" href="admin-ganadores.html">
                        <span>Gestionar ganadores</span>
                    </a>
                </div>
            </div>
            <div class="card-header">
                <div class="d-flex flex-row gap-12px">
                    <div class="icon-container flex-shrink-0">
                        <span class="icon-picture bg-neutral-01 w-24px h-24px"></span>
                    </div>
                    <div class="d-flex flex-column gap-4px">
                        <span class="card-header-title">Galería de imágenes y vídeos</span>
                        <span class="card-header-subtitle">Se incluirán las imágenes y vídeos de la galería de la edición actual</span>
                    </div>
                </div>
                <div class="d-flex align-items-center gap-8px flex-shrink-0">
                    <a class="primary-button-02 close-modal">
                        <span>Gestionar galería</span>
                    </a>
                </div>
            </div>
            <div class="warning-text-container text-warning-01 d-flex flex-row align-items-start">
                <span class="icon-warning w-28px h-28px bg-warning-01 flex-shrink-0"></span>
                <div class="warning-content">
                    <span class="warning-main-text">Esta acción creará una nueva edición en el histórico</span>
                    <span class="warning-secondary-text">Se creará un registro permanente con los ganadores, galería y datos de participación. Las acciones programadas se ejecutarán en las fechas indicadas.</span>
                </div>
            </div>
            <span class="divider-line"></span>
        </div>
        <div class="p-24px border-top border-solid border-neutral-05 bg-white">
            <div class="d-flex-two-columns-responsive">
                <div class="secondary-button-02 text-center modal-close-button close-modal">Cancelar</div>
                <div class="primary-button-01" id="confirmarEnviarEdicionesAnterioresBtn">Continuar</div>
            </div>
        </div>
    </modal-component>

    <dialog id="modalEdicionCreadaExito" class="generic-modal bg-neutral-09">
        <div class="d-flex flex-column gap-24px p-24px justify-content-center align-items-center">
            <span class="icon-check w-80px h-80px bg-primary-03"></span>
            <h1 class="text-center">¡Edición creada correctamente!</h1>
            <p class="text-neutral-04">La edición 2026 se ha añadido al histórico de ediciones anteriores</p>
            <div class="d-flex gap-16px justify-content-center">
                <span class="icon-sand-clock w-24px h-24px bg-neutral-01"></span>
                <span class="fs-24px fw-500">Acciones programadas configuradas</span>
            </div>
        </div>
    </dialog>

    <notification-component id="notification"></notification-component>

    <loading-bar-component id="loadingBar"></loading-bar-component>

    <script src="../js/libraries/Sortable.min.js"></script>
    <script src="../js/libraries/air-datepicker.min.js"></script>
    <script src="../js/components/input-component.js"></script>
    <script src="../js/components/file-component.js"></script>
    <script src="../js/components/modal-component.js"></script>
    <script src="../js/components/date-component.js"></script>
    <script src="../js/components/notification-component.js"></script>
    <script src="../js/components/pagination-component.js"></script>
    <script src="../js/components/video-player-component.js"></script>
    <script src="../js/components/carousel-component.js"></script>
    <script src="../js/components/loading-bar-component.js"></script>
    <script src="../js/menu-admin.js"></script>
    <script src="../js/admin-modo.js"></script>
</body>
</html>