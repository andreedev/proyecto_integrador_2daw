<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuracion Web</title>
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/libraries/air-datepicker.min.css">
    <link rel="stylesheet" href="../css/general-styles.css">
    <link rel="stylesheet" href="../css/menu-admin.css">
    <link rel="stylesheet" href="../css/admin-configuracion-web.css">
    <link rel="stylesheet" href="../css/utils.css">
</head>
<body>
    <div id="splash">
        <img src="../img/logo-loading.gif" alt="Cargando...">
    </div>

    <div class="admin-super-container">
        <menu-admin></menu-admin>
        <div class="admin-page-content">
            <div class="admin-header">
                <div class="admin-header-module-info-container">
                    <p class="admin-module-name">Gala/Configuración Web</p>
                    <span class="admin-module-description">Gestiona el contenido público de la Gala para el sitio web</span>
                </div>
            </div>

            <div class="admin-content">
                <div class="generic-cards-container">

                    <div class="generic-card">
                        <div class="mode-info-internal-card">
                            <div class="mode-info-container">
                               <span class="mode-info-text">Modo:</span>
                               <div class="mode-buttons-container">
                                    <div class="mode-button active" id="preEventoButton">Pre-evento</div>
                                    <div class="mode-button" id="postEventoButton">Post-evento</div>
                                </div>
                            </div>
                            <div class="last-updated-info-container">
                                <div class="published-text-container">
                                    <span class="icon-check w-20px h-20px bg-success-01"></span>
                                    <span>Publicado</span>
                                </div>
                                <span class="text-warning-01 fs-12px fw-500 hidden-force" id="unsavedChangesWarning">
                                    ● Hay cambios sin publicar
                                </span>
                                <div class="last-modified-text-container">
                                    <span class="last-modified-label">
                                        <span class="icon-clock w-20px h-20px bg-neutral-02"></span>
                                        Última modificación:
                                    </span>
                                    <span class="last-modified-date" id="fechaUltimaModificacionText">01/09/2025 14:30</span>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-space-between main-action-buttons-container">
                            <div class="main-action-left-side">
                                <div class="admin-header-main-action-button fs-14px" id="publishChangesButton">
                                    <span>Publicar cambios</span>
                                </div>
                            </div>
                            <div class="main-action-right-side">
                                <div class="secondary-button-02" id="sendToPreviousEditionsButton">
                                    <span>Enviar a Ediciones Anteriores</span>
                                </div>
                            </div>
                        </div>

                        <span id="generalMessage" class="fs-12px fw-500"></span>
                    </div>


                    <!-- Cards Pre-evento -->
                    <div class="generic-card preEventoCard hidden-force">
                        <div class="card-header">
                            <div class="card-header-left-side">
                                <div class="icon-container bg-gradient-01">
                                    <span class="icon-document w-24px h-24px bg-neutral-09"></span>
                                </div>
                                <div class="card-header-title-container">
                                    <span class="card-header-title">Información Principal</span>
                                    <span class="card-header-subtitle">Datos generales del evento</span>
                                </div>
                            </div>
                            <div class="card-header-right-side">
                            </div>
                        </div>
                        <div class="generic-input-group">
                            <span class="generic-input-label">Título del evento principal</span>
                            <label class="generic-input-wrapper">
                                <input id="tituloEventoInput" class="generic-input" value="Reunión de planificación" type="text">
                            </label>
                            <span id="tituloEventoErrorMessage" class="error-message"></span>
                        </div>
                        <div class="generic-input-groups-row">
                            <div class="generic-input-group">
                                <span class="generic-input-label">Fecha</span>
                                <label class="generic-input-wrapper">
                                    <input id="fechaEventoInput" class="generic-input" value="09/01/2026">
                                    <span class="icon-calendar w-20px h-20px bg-neutral-03"></span>
                                </label>
                                <span id="fechaEventoErrorMessage" class="error-message"></span>
                            </div>
                            <div class="generic-input-group">
                                <span class="generic-input-label">Hora</span>
                                <label class="generic-input-wrapper">
                                    <input id="horaEventoInput" class="generic-input" value="19:00" type="text">
                                    <span class="icon-clock w-20px h-20px bg-neutral-03"></span>
                                </label>
                                <span id="horaEventoErrorMessage" class="error-message"></span>
                            </div>
                        </div>
                        <div class="generic-input-group">
                            <span class="generic-input-label">Ubicación</span>
                            <label class="generic-input-wrapper">
                                <span class="icon-location w-20px h-20px bg-neutral-03"></span>
                                <input id="ubicacionEventoInput" class="generic-input" value="Auditorio principal" type="text">
                            </label>
                            <span id="ubicacionEventoErrorMessage" class="error-message"></span>
                        </div>
                        <div class="large-input-group">
                            <div class="large-input-group-header">
                                <span class="large-input-group-label-text">Descripción</span>
                            </div>
                            <div class="large-input-group-body">
                                <textarea id="descripcionInput" class="textarea-input" value="¡Bienvenidos a la Gala de Cortometrajes 2026! Únete a nosotros para celebrar el talento creativo de nuestros estudiantes y alumni. "></textarea>
                            </div>
                            <span id="descripcionErrorMessage" class="error-message"></span>
                            <span class="helper-text">Esta información aparecerá en la landing page pública</span>
                        </div>
                    </div>
                    <div class="generic-card preEventoCard hidden-force">
                        <div class="card-header">
                            <div class="card-header-left-side">
                                <div class="icon-container bg-primary-05">
                                    <span class="icon-live w-24px h-24px bg-primary-03"></span>
                                </div>
                                <div class="card-header-title-container">
                                    <span class="card-header-title">Streaming en vivo</span>
                                    <span class="card-header-subtitle">Habilita y configura el enlace de streaming</span>
                                </div>
                            </div>
                            <div class="card-header-right-side">
                            </div>
                        </div>
                        <div class="streaming-card" id="streamingToggleContainer">
                            <div class="streaming-left-side">
                                <div class="streaming-indicator">
                                    <span class="icon-live w-24px h-24px bg-neutral-03 icon"></span>
                                    <span class="streaming-indicator-text" id="streamingIndicatorText">OFF</span>
                                </div>
                               <div class="streaming-text-container">
                                   <span class="streaming-label-text">Mostrar enlace de streaming</span>
                                   <span class="streaming-helper-text" id="streamingHelperText">El enlace estará oculto para los visitantes</span>
                               </div>
                            </div>
                            <div class="streaming-right-side">
                                <div class="streaming-toggle-button" id="streamingToggleButton">
                                    <div class="toggle-button-circle"></div>
                                </div>
                            </div>
                        </div>
                        <div class="generic-input-group hidden-force" id="urlStreamingContainer">
                            <span class="generic-input-label">URL del streaming</span>
                            <label class="generic-input-wrapper">
                                <span class="icon-link w-20px h-20px bg-neutral-03"></span>
                                <input id="urlStreamingInput" class="generic-input" type="text" placeholder="https://youtube.com/watch?v=...">
                            </label>
                            <span id="urlStreamingErrorMessage" class="error-message"></span>
                            <span class="helper-text">Introduce la URL completa del streaming (YouTube, TikTok, etc.)</span>
                        </div>
                    </div>
                    <div class="generic-card preEventoCard hidden-force">
                        <div class="card-header">
                            <div class="card-header-left-side">
                                <div class="icon-container bg-gradient-01">
                                    <span class="icon-calendar w-20px h-20px bg-neutral-09"></span>
                                </div>
                                <div class="card-header-title-container">
                                    <span class="card-header-title">Itinerario del día</span>
                                    <span class="card-header-subtitle">Eventos programados para la Gala</span>
                                </div>
                            </div>
                            <div class="card-header-right-side">
                                <a class="primary-button-02" href="admin-eventos.html">
                                    <span class="icon-external w-16px h-16px bg-primary-03"></span>
                                    <span>Gestionar eventos</span>
                                </a>
                            </div>
                        </div>
                        <div class="secondary-card">
                            <span class="helper-text-2">Los eventos se gestionan desde el módulo de Eventos. Los cambios se reflejarán automáticamente en la landing pública.</span>
                        </div>
                    </div>


                    <!-- Cards Post-evento -->
                    <div class="generic-card postEventoCard hidden-force">
                        <div class="card-header">
                            <div class="card-header-left-side">
                                <div class="icon-container bg-primary-05">
                                    <span class="icon-document w-24px h-24px bg-primary-03"></span>
                                </div>
                                <div class="card-header-title-container">
                                    <span class="card-header-title">Resumen del evento</span>
                                    <span class="card-header-subtitle">Texto descriptivo para la landing post-evento</span>
                                </div>
                            </div>
                            <div class="card-header-right-side">
                            </div>
                        </div>
                        <div class="large-input-group">
                            <div class="large-input-group-header">
                                <span class="large-input-group-label-text">Contenido</span>
                            </div>
                            <div class="large-input-group-body h-100px">
                                <textarea id="postEventoResumenInput" class="textarea-input">La Gala de Cortometrajes 2026 fue un éxito rotundo...</textarea>
                            </div>
                            <span id="postEventoResumenErrorMessage" class="error-message"></span>
                            <span class="helper-text">Describe los momentos destacados y el éxito del evento</span>
                        </div>
                    </div>

                    <div class="generic-card postEventoCard hidden-force">
                        <div class="card-header">
                            <div class="card-header-left-side">
                                <div class="icon-container bg-gradient-01">
                                    <span class="icon-picture bg-neutral-09 w-20px h-20px"></span>
                                </div>
                                <div class="card-header-title-container">
                                    <span class="card-header-title">Galería de imágenes y vídeos</span>
                                    <span class="card-header-subtitle">Sube las fotos y vídeos del evento</span>
                                </div>
                            </div>
                        </div>
                        <div id="fileDropZone" class="large-input-group-body bg-neutral-09 border-dashed border-primary-03">
                            <input type="file" id="fileInput" class="file-input" hidden multiple>
                            <div class="upload-content">
                                <div class="drop-zone-icon-container bg-primary-05">
                                    <span class="icon-picture bg-primary-03 w-20px h-20px"></span>
                                </div>
                                <p class="upload-text">Arrastra tu imagen o vídeo o haz clic para seleccionar</p>
                                <p class="upload-subtext">MP4, WebM, JPG, JPEG, PNG, máximo 500MB</p>
                            </div>
                        </div>
                        <div class="image-gallery-container">
                            <div class="d-flex justify-space-between flex-wrap gap-8px">
                                <span class="fw-500 fs-14px">Archivos subidos (<span id="uploadedFilesCount">0</span>)</span>
                                <span class="fw-500 fs-14px text-neutral-04">Arrastra para reordenar</span>
                            </div>
                            <div class="image-gallery-items-container" id="galleryContainer">
                            </div>
                        </div>
                        <div class="secondary-card hidden-force" id="noFilesHelperText">
                            <span class="helper-text-2">No hay imágenes o vídeos subidos. Haz clic en el botón de arriba para añadir videos del evento.</span>
                        </div>
                    </div>

                    <div class="generic-card postEventoCard hidden-force">
                        <div class="card-header">
                            <div class="card-header-left-side">
                                <div class="icon-container bg-gradient-01">
                                    <span class="icon-trophy bg-neutral-09 w-20px h-20px"></span>
                                </div>
                                <div class="card-header-title-container">
                                    <span class="card-header-title">Ganadores del evento</span>
                                    <span class="card-header-subtitle">Lista de ganadores por categoría</span>
                                </div>
                            </div>
                            <div class="card-header-right-side">
                                <a class="primary-button-02" href="admin-ganadores.html">
                                    <span class="icon-external"></span>
                                    <span>Gestionar ganadores</span>
                                </a>
                            </div>
                        </div>
                        <div class="secondary-card">
                            <span class="helper-text-2">Los ganadores se gestionan desde el módulo de Finalistas. Los cambios se reflejarán automáticamente en la landing pública.</span>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <dialog id="modalEnviarEdicionesAnteriores" class="generic-modal bg-neutral-08">
        <div class="modal-header d-flex justify-space-between align-center">
            <div class="modal-header-left-side">
                <span class="modal-header-title">Enviar a Ediciones Anteriores</span>
                <span class="modal-header-subtitle">Crea una nueva entrada en el histórico de ediciones</span>
            </div>
            <div class="modal-header-right-side">
                <span class="icon-close w-24px h-24px bg-neutral-03 modal-close-button cursor-pointer closeEnviarEdicionesAnterioresModal"></span>
            </div>
        </div>
        <div class="modal-body">
            <p class="fw-600">Información básica de la Edición</p>
            <div class="generic-input-groups-row">
                <div class="generic-input-group">
                    <span class="generic-input-label">Año de edición</span>
                    <label class="generic-input-wrapper">
                        <span class="icon-calendar w-16px h-16px bg-neutral-03"></span>
                        <input id="yearEdicionInput" class="generic-input" value="2026">
                    </label>
                    <span id="yearEditionErrorMessage" class="error-message"></span>
                </div>
                <div class="generic-input-group">
                    <span class="generic-input-label">Número de participantes</span>
                    <label class="generic-input-wrapper">
                        <span class="icon-user-thick w-16px h-16px bg-neutral-03"></span>
                        <input id="nroParticipantesInput" class="generic-input" value="150" type="text">
                    </label>
                    <span id="nroParticipantesErrorMessage" class="error-message"></span>
                </div>
            </div>
            <p class="fw-600">Acciones programadas</p>
            <div class="generic-input-group">
                <span class="generic-input-label">Envío de email informativo</span>
                <label class="generic-input-wrapper">
                    <input id="fechaEnvioEmailInformativoInput" class="generic-input  text-neutral-02" value="09/01/2026">
                    <span class="icon-calendar w-20px h-20px bg-neutral-02"></span>
                </label>
                <span id="fechaEnvioEmailInformativoErrorMessage" class="error-message"></span>
                <span class="helper-text">Se enviará un email a todos los participantes informando del archivo de esta edición</span>
            </div>
            <div class="generic-input-group">
                <span class="generic-input-label">Borrado de datos no ganadores</span>
                <label class="generic-input-wrapper">
                    <input id="fechaBorradoDatosInput" class="generic-input  text-neutral-02" value="09/01/2026">
                    <span class="icon-calendar w-20px h-20px bg-neutral-02"></span>
                </label>
                <span id="fechaBorradoDatosInputErrorMessage" class="error-message"></span>
                <span class="helper-text">Se eliminarán automáticamente las candidaturas que no sean ganadoras</span>
            </div>
            <div class="warning-text-container text-warning-01 d-flex flex-row align-start">
                <span class="icon-warning w-28px h-28px bg-warning-01 flex-shrink-0"></span>
                <div class="warning-content">
                    <span class="warning-main-text">Esta acción creará una nueva edición en el histórico</span>
                    <span class="warning-secondary-text">Se creará un registro permanente con los ganadores, galería y datos de participación. Las acciones programadas se ejecutarán en las fechas indicadas.</span>
                </div>
            </div>
            <span class="divider-line"></span>
            <div class="d-flex-two-columns-responsive">
                <div class="neutral-button modal-close-button closeEnviarEdicionesAnterioresModal">Cancelar</div>
                <div class="primary-button" id="confirmEnviarEdicionesAnterioresButton">Continuar</div>
            </div>
        </div>
    </dialog>

    <script src="../js/api-service.js"></script>
    <script src="../js/check-session.js"></script>
    <script src="../js/menu-admin.js"></script>
    <script src="../js/libraries/Sortable.min.js"></script>
    <script src="../js/libraries/air-datepicker.min.js"></script>
    <script src="../js/admin-configuracion-web.js"></script>
</body>
</html>